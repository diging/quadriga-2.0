<html layout:decorate="~{layouts/main}">
<head>
<title>Quadriga 2.0</title>
</head>
<body>
	<div layout:fragment="content">
		<a th:href="@{/auth/collections}" class="btn btn-primary btn-sm">
			<i class="fas fa-arrow-left" aria-hidden="true"></i>
			<span>Back to all collections</span>
		</a>
		<h2><span th:text="${collection.name}"></span></h2>
		<h4>Description: <span th:text="${collection.description}"></span></h4>
		<div style="margin-top: 20px">
			<p>Collection creation time: <span th:text="${#temporals.format(collection.creationTime, 'MM/dd/yyyy hh:mm a')}"></span></p>
			<h4 th:if="${numberOfSubmittedNetworks eq 0}">No networks submitted to this collection yet!</h4>
			
			<p th:if="${numberOfSubmittedNetworks gt 0}">Number of submitted networks: <span th:text="${numberOfSubmittedNetworks}"></span></p>
			<p th:if="${numberOfSubmittedNetworks gt 0}">
				Last network submitted time: <span th:text="${#temporals.format(lastNetworkSubmittedAt, 'MM/dd/yyyy hh:mm a')}"></span>
			</p>
			<p th:if="${numberOfSubmittedNetworks gt 0}">
				Last network submitted by: <span th:text="${lastNetworkSubmittedBy}"></span>
			</p>
		</div>
		
		<table class="table table-responsive table-striped table-sm" style="margin-top: 20px">
			<thead>
				<tr>
					<th scope="col">Mappings</th>
					<th scope="col">Triples</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td><b>Default Mappings</b></td>
					<td><b><span th:text="${defaultMappings}"></span></b></td>
				</tr>
				<!-- Once the functionality to add other mappings is added, all exterrnal mappings should be listed here -->
			</tbody>
		</table>
		
		<table th:if="${numberOfSubmittedNetworks gt 0}" id="dtBasicExample" class="table table-responsive table-striped table-sm" style="margin-top: 20px">
		  <thead>
		    <tr>
		    	<th scope="col">#</th>
				<th scope="col">Name</th>
				<th scope="col">Default Mapping</th>
				<th scope="col">Date and Time</th>
		      	<th scope="col">Triples</th>
		    </tr>
		  </thead>
		  <tbody>
		    <tr th:each="network, stat: ${networks}">
		    	<th scope="row" th:text="${stat.count + networks.number * size}"></th>
		    	<td>
		    		<span>
						Graph for text submitted by <span  th:text="${network.rootEvent.creator.sourceURI}"></span>
						from <span th:text="${network.appName}"></span>
					</span>
				</td>
				<td scope="col">
					<span th:text="${network.defaultMapping.subject.label + ' '
						+ network.defaultMapping.predicate.label + ' '
						+ network.defaultMapping.object.label}"></span>
				</td>
				<td><span th:text="${#temporals.format(network.creationTime, 'MM/dd/yyyy hh:mm a')}"></span></td>
				<td th:text="${triplesMap.get(network.id)}"></td>
			</tr>
		  </tbody>
		 </table>
		
		<nav aria-label="Pagination" th:if="${networks.totalPages gt 0}">
			<ul class="pagination justify-content-center font-weight-bold">
				<li class="page-item" th:classappend="${networks.number eq 0} ? 'disabled'">
					<a class="page-link"
						th:href="@{/auth/collections/{collectionId}?page={id}&size={size}
						(id=${networks.number lt 2 ? 1 : networks.number}, collectionId=${collection.id}, size=${size})}"
						aria-label="Previous" title="Previous Page" data-toggle="tooltip"
						th:onclick="${networks.number eq 0} ? 'return false;'">
						<span aria-hidden="true">&laquo;</span>
					</a>
				</li>
				<li class="page-item" th:classappend="${i eq networks.number + 1} ? 'active'" th:each="i : ${#numbers.sequence(1, networks.totalPages, 1)}">
					<a class="page-link"
						th:href="@{/auth/collections/{collectionId}?page={id}&size={size}
						(id=${i}, collectionId=${collection.id}, size=${size})}" th:text="${i}"
						th:title="${'Page '+ i}" data-toggle="tooltip">
					</a>
				</li>
				<li class="page-item" th:classappend="${networks.number + 1 eq networks.totalPages} ? 'disabled'">
					<a class="page-link"
						th:href="@{/auth/collections/{collectionId}?page={id}&size={size}
						(id=${networks.number + 2}, collectionId=${collection.id}, size=${size})}"
						aria-label="Next" title="Next Page" data-toggle="tooltip"
						th:onclick="${networks.number + 1 eq networks.totalPages} ? 'return false;'">
						<span aria-hidden="true">&raquo;</span>
					</a>
				</li>
			</ul>
		</nav>
		
	</div>
</body>